{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","axios","get","newPerson","post","id","delete","newObject","put","Search","handleChange","value","onChange","Form","newName","handleNameChange","newNumber","handleNumberChange","handleAddClick","type","onClick","Entry","person","handleRemovePerson","name","number","data-id","data-name","Notification","message","className","Error","Numbers","App","useState","persons","setPersons","setNewName","setNewNumber","searchQuery","setSearchQuery","notification","setNotification","error","setError","useEffect","personService","then","res","data","e","confirmRemoveOfPerson","target","dataset","filter","displayNotification","window","confirm","createPersonFromState","setTimeout","displayError","preventDefault","find","toLowerCase","newEntry","map","catch","console","log","response","JSON","stringify","updatePersonInPhonebook","concat","addPersonToPhonebook","indexOf","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f296e9e4.chunk.js","sourcesContent":["import axios from 'axios';\nconst baseUrl = 'http://localhost:3001/api/persons/';\n\nconst getAll = () => {\n\treturn axios.get(baseUrl);\n};\n\nconst getOne = (id) => {\n\treturn axios.get(`${baseUrl}${id}`);\n};\n\nconst create = (newPerson) => {\n\treturn axios.post(baseUrl, newPerson);\n};\n\nconst remove = (id) => {\n\treturn axios.delete(`${baseUrl}${id}`);\n};\n\nconst update = (id, newObject) => {\n\treturn axios.put(baseUrl + id, newObject);\n};\n\nexport default {\n\tgetAll: getAll,\n\tcreate: create,\n\tremove: remove,\n\tupdate: update,\n};\n","import React, { useState, useEffect } from 'react';\nimport personService from './services/persons';\nimport './App.css';\n\n//Components\nconst Search = ({ handleChange, value }) => {\n\treturn (\n\t\t<div>\n\t\t\tfilter <input onChange={handleChange} value={value} />\n\t\t</div>\n\t);\n};\n\nconst Form = ({ newName, handleNameChange, newNumber, handleNumberChange, handleAddClick }) => {\n\treturn (\n\t\t<form>\n\t\t\t<div>\n\t\t\t\tname: <input onChange={handleNameChange} value={newName} />\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\tnumber: <input onChange={handleNumberChange} value={newNumber} />\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<button type=\"submit\" onClick={handleAddClick}>\n\t\t\t\t\tadd\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</form>\n\t);\n};\n\nconst Entry = ({ person, handleRemovePerson }) => {\n\treturn (\n\t\t<div>\n\t\t\t{person.name} {person.number}{' '}\n\t\t\t<button data-id={person.id} data-name={person.name} onClick={handleRemovePerson}>\n\t\t\t\tdelete\n\t\t\t</button>\n\t\t</div>\n\t);\n};\n\nconst Notification = ({ message }) => {\n\tif (message === '') {\n\t\treturn null;\n\t} else {\n\t\treturn <div className=\"notification\">{message}</div>;\n\t}\n};\n\nconst Error = ({ message }) => {\n\tif (message === '') {\n\t\treturn null;\n\t} else {\n\t\treturn <div className=\"error\">{message}</div>;\n\t}\n};\n\nconst Numbers = () => {\n\treturn <h2>Numbers</h2>;\n};\n\n//App\nconst App = () => {\n\t//States\n\tconst [persons, setPersons] = useState([]);\n\tconst [newName, setNewName] = useState('');\n\tconst [newNumber, setNewNumber] = useState('');\n\tconst [searchQuery, setSearchQuery] = useState('');\n\tconst [notification, setNotification] = useState('');\n\tconst [error, setError] = useState('');\n\n\t//Functions\n\tuseEffect(() => {\n\t\tpersonService.getAll().then((res) => {\n\t\t\tsetPersons(res.data);\n\t\t});\n\t}, []);\n\n\tconst handleRemovePerson = (e) => {\n\t\tif (confirmRemoveOfPerson(e.target.dataset.name)) {\n\t\t\tpersonService.remove(e.target.dataset.id).then((res) => {\n\t\t\t\tsetPersons(\n\t\t\t\t\tpersons.filter((person) => {\n\t\t\t\t\t\treturn person.id !== e.target.dataset.id;\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t\tdisplayNotification(`${e.target.dataset.name} has been removed from phonebook.`);\n\t\t\t});\n\t\t}\n\t};\n\n\tconst confirmRemoveOfPerson = (name) => {\n\t\treturn window.confirm(`Delete ${name}`);\n\t};\n\n\tconst handleNameChange = (e) => {\n\t\tsetNewName(e.target.value);\n\t};\n\n\tconst handleNumberChange = (e) => {\n\t\tsetNewNumber(e.target.value);\n\t};\n\n\tconst handleFilterChange = (e) => {\n\t\tsetSearchQuery(e.target.value);\n\t};\n\tconst nameIsAlreadyInPhonebook = () => {\n\t\treturn persons.find((person) => person.name.toLowerCase() === newName.toLowerCase());\n\t};\n\n\tconst addPersonToPhonebook = () => {\n\t\tconst newEntry = createPersonFromState();\n\n\t\tpersonService.create(newEntry).then((res) => {\n\t\t\tsetPersons(persons.concat(res.data));\n\t\t\tdisplayNotification(`${newName} added to phonebook`);\n\t\t});\n\t};\n\n\tconst createPersonFromState = () => {\n\t\treturn {\n\t\t\tname: newName,\n\t\t\tnumber: newNumber,\n\t\t};\n\t};\n\n\tconst updatePersonInPhonebook = () => {\n\t\tconst newEntry = createPersonFromState();\n\n\t\t//todo make this code a sperate function\n\t\tconst foundPerson = persons.find((person) => {\n\t\t\treturn person.name.toLowerCase() === newName.toLowerCase();\n\t\t});\n\n\t\tconst id = foundPerson.id;\n\n\t\tpersonService\n\t\t\t.update(id, newEntry)\n\t\t\t.then((res) => {\n\t\t\t\tsetPersons(\n\t\t\t\t\tpersons.map((person) => {\n\t\t\t\t\t\treturn person.id !== id ? person : res.data;\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t\tdisplayNotification(`Number for ${newName} updated to ${newNumber}`);\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\t//logging error.response.data\n\t\t\t\tconsole.log(\n\t\t\t\t\t'######',\n\t\t\t\t\t'VARIABLE NAME:',\n\t\t\t\t\t'error.response.data',\n\t\t\t\t\t'TYPEOF:',\n\t\t\t\t\ttypeof error.response.data,\n\t\t\t\t\t'VALUE:',\n\t\t\t\t\terror.response.data,\n\t\t\t\t\t'######'\n\t\t\t\t);\n\t\t\t\t//end of logging\n\n\t\t\t\t//logging error.message\n\t\t\t\tconsole.log(\n\t\t\t\t\t'######',\n\t\t\t\t\t'VARIABLE NAME:',\n\t\t\t\t\t'error.message',\n\t\t\t\t\t'TYPEOF:',\n\t\t\t\t\ttypeof error.message,\n\t\t\t\t\t'VALUE:',\n\t\t\t\t\terror.message,\n\t\t\t\t\t'######'\n\t\t\t\t);\n\t\t\t\t//end of logging\n\n\t\t\t\tconsole.log(error.message);\n\n\t\t\t\tdisplayError(JSON.stringify(error.response.data));\n\t\t\t});\n\t};\n\n\tconst handleAddClick = (e) => {\n\t\te.preventDefault();\n\t\tif (nameIsAlreadyInPhonebook()) {\n\t\t\tif (window.confirm(`${newName} is already in phonebook. Replace old number with new one?`)) {\n\t\t\t\tupdatePersonInPhonebook();\n\t\t\t}\n\t\t} else {\n\t\t\taddPersonToPhonebook();\n\t\t}\n\t\tsetNewName('');\n\t\tsetNewNumber('');\n\t};\n\n\tconst filterByName = () => {\n\t\treturn persons.filter((person) => {\n\t\t\treturn person.name.toLowerCase().indexOf(searchQuery.toLowerCase()) !== -1;\n\t\t});\n\t};\n\n\tconst renderPersons = (arrayOfPersons) => {\n\t\treturn arrayOfPersons.map((person) => {\n\t\t\treturn <Entry key={person.name} person={person} handleRemovePerson={handleRemovePerson} />;\n\t\t});\n\t};\n\n\tconst filterAndRenderPersons = () => {\n\t\treturn renderPersons(filterByName());\n\t};\n\n\tconst displayNotification = (message) => {\n\t\tsetNotification(message);\n\t\tsetTimeout(() => setNotification(''), 5000);\n\t};\n\n\tconst displayError = (message) => {\n\t\tsetError(message);\n\t\tsetTimeout(() => setError(''), 15000);\n\t};\n\n\t//JSX\n\treturn (\n\t\t<div>\n\t\t\t<Notification message={notification} />\n\t\t\t<Error message={error} />\n\t\t\t<h2>Phonebook</h2>\n\t\t\t<Search handleChange={handleFilterChange} value={searchQuery} />\n\t\t\t<Form\n\t\t\t\tnewName={newName}\n\t\t\t\thandleNameChange={handleNameChange}\n\t\t\t\tnewNumber={newNumber}\n\t\t\t\thandleNumberChange={handleNumberChange}\n\t\t\t\thandleAddClick={handleAddClick}\n\t\t\t/>\n\n\t\t\t<Numbers />\n\n\t\t\t{filterAndRenderPersons()}\n\t\t</div>\n\t);\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}